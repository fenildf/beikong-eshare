.page-course-show
  .pblock.modelinfo
    = render_cell :course, :header, :course => @course, :user => current_user

    = render_cell :course, :navbar, :course => @course

  .mainp100
    .pblock.users-rank
      %h3.cp
        %i.icon-th-list
        %span 学生名单
      .desc 总共 #{@course.selected_users.count} 人学习本课程

      .page-course-users-rank
        .users-head
          %span.index 排名
          %span.name 学友
          %span.percent 学习进度

        .users
          - @course.selected_users.each do |user|
            - percent = @course.read_percent(user)
            - klass = (user == current_user ? "me" : "")
            .user{:class => klass}
              .avatar= avatar_link user, :small
              .name= user_link user
              .prog
                .page-progress.info.striped
                  .bar{:style => "width:#{percent};"}
                  .p= percent
              - if current_user == @course.creator
                .ops{:style => 'float:right;'}
                  = link_to "/courses/#{@course.id}/unselect?user_id=#{user.id}", :confirm => '确定要把这个学生从课程中移除吗？', :method => :delete, :class => 'remove_select btn danger small' do
                    %i.icon-trash.icon-white
                    %span 移除